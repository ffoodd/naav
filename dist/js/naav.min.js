"use strict";$(document).ready(function(){$('[data-toggle="collapse"]').each(function(){var a=$(this),t=a.attr("href"),e=t.split("#");a.attr({"aria-controls":e[1],"aria-expanded":"false"}),$(t).attr("aria-hidden","true"),a.on("click",function(e){e.preventDefault();var r=a.attr("aria-expanded"),n=$('[href="'+t+'"]'),i=$('[data-toggle="collapse"][aria-expanded="true"]').not(a);if(i.length){var s=i.attr("href");i.attr("aria-expanded","false"),$(s).attr("aria-hidden","true")}"true"===r?($(t).attr("aria-hidden","true"),n.attr("aria-expanded","false")):($(t).removeAttr("aria-hidden"),n.attr("aria-expanded","true"))})});var a=$(".fresh-menu"),t=a.find("ul"),e=$("#nav");t.each(function(){var a=$(this),t=a.parents("li").length,e=a.parents("li").first().index(),r=a.prev("a"),n=r.text(),i=a.parents("ul.fresh-menu").data("menu"),s="subnav-"+i+"-"+e+"-"+t,d=a.parents("ul").attr("id"),l=a.find("li").last().find("a");if(a.attr({id:s,"aria-hidden":"true","data-level":t}),a.addClass("has-subnav"),r.length&&(r.append('<span aria-hidden="true">→</span>'),r.attr({class:"js-open-subnav","aria-controls":s,"aria-expanded":"false",href:"#"+s})),2<=t){var o=$("<li></li>"),u=$("<a></a>");u.attr({class:"js-close-subnav","aria-controls":s,"aria-expanded":"false",href:"#"+d}),u.html('<span aria-hidden="true">&nbsp;←</span>'+n),o.append(u),a.prepend(o)}l.addClass("last-item")});var r=$(".js-open-subnav"),n=$(".js-close-subnav"),i=$(".last-item"),s=function(a,t,r,n){$('[aria-controls="'+a+'"]').attr("aria-expanded","false"),t.attr("aria-hidden","true"),e.attr("data-level",r-1),n.length&&$('[aria-controls="'+n.attr("id")+'"]').attr("aria-expanded","true")};r.each(function(){var a=$(this),t=a.attr("aria-controls"),r=$("#"+t),n=(a.parents(".has-subnav").first(),r.data("level"));a.on("click",function(a){a.preventDefault(),history.pushState(null,null,"#"+t),r.removeAttr("aria-hidden"),$('[aria-controls="'+t+'"]').attr("aria-expanded","true"),e.on("transitionend",".navbar-mega",function(a){r.find(".js-close-subnav").first().focus()}),e.attr("data-level",n)})}),$("a, .fresh-menu").on("transitionend",function(a){a.stopPropagation()}),n.each(function(){var a=$(this),t=a.attr("aria-controls"),e=a.parents(".has-subnav").first(),r=$("#"+t).parents(".has-subnav").first(),n=a.parents(".fresh-menu").first(),i=$("#"+t).data("level");a.on("click",function(){s(t,e,i,r),r.length?r.find(".js-close-subnav").first().focus():n.find('[aria-controls="'+t+'"]').first().focus()}),a.on("keydown",function(a){a.shiftKey&&9==a.keyCode&&(a.preventDefault(),$(this).click())})}),i.each(function(){var a=$(this),t=a.parents(".has-subnav").first(),e=t.find(".js-close-subnav").first().attr("aria-controls"),r=$("#"+e).parents(".has-subnav").first(),n=$("#"+e).data("level");a.on("keydown",function(a){a.shiftKey||9!=a.keyCode||s(e,t,n,r)})});var d=$("<button></button>");d.attr({class:"btn-hamburger",type:"button","aria-controls":"nav","aria-expanded":"false","aria-label":"Navigation"}),d.html('<svg aria-hidden="true" class="hamburger"><use xlink:href="#hamburger"/></svg>'),$(".anchors").before(d),e.attr("aria-hidden","true"),d.on("click",function(){e.attr("aria-hidden")?(d.attr("aria-expanded","true"),e.removeAttr("aria-hidden"),e.addClass("is-opened")):(d.attr("aria-expanded","false"),e.attr("aria-hidden","true"),e.removeClass("is-opened"))}),$('.anchors [data-toggle="collapse"]').on("click",function(){e.attr("aria-hidden")&&d.trigger("click")})});